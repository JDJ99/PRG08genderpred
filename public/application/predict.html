<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script defer src="app.js" type="module"></script>
  <title>Gender Prediction</title>
  <style>
    body {
      background-color: #F3E5F5; /* Light purple background */
      color: #333; /* Dark gray text color */
    }

    h1 {
      color: #673AB7; /* Deep purple heading color */
      text-align: center;
      margin-bottom: 30px;
    }

    .form-label {
      color: #512DA8; /* Indigo form label color */
      font-weight: bold;
    }

    .btn-primary {
      background-color: #AB47BC; /* Purple button background */
      border-color: #AB47BC; /* Purple button border color */
    }

    .btn-primary:hover {
      background-color: #9C27B0; /* Darker purple button background on hover */
      border-color: #9C27B0; /* Darker purple button border color on hover */
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1>Gender Prediction</h1>

    <form>
      <div class="mb-3">
        <label for="color" class="form-label">Favorite Color:</label>
        <input type="text" id="color" name="color" list="colorOptions" required class="form-control">
      </div>

      <div class="mb-3">
        <label for="musicGenre" class="form-label">Favorite Music Genre:</label>
        <input type="text" id="musicGenre" name="musicGenre" list="musicGenreOptions" required class="form-control">
      </div>

      <div class="mb-3">
        <label for="beverage" class="form-label">Favorite Beverage:</label>
        <input type="text" id="beverage" name="beverage" list="beverageOptions" required class="form-control">
      </div>

      <div class="mb-3">
        <label for="softDrink" class="form-label">Favorite Soft Drink:</label>
        <input type="text" id="softDrink" name="softDrink" list="softDrinkOptions" required class="form-control">
      </div>

      <datalist id="colorOptions">
        <option value="Cool">
        <option value="Neutral">
        <option value="Warm">
      </datalist>

      <datalist id="musicGenreOptions">
        <option value="Rock">
        <option value="Hip hop">
        <option value="Folk/Traditional">
        <option value="Pop">
        <option value="Jazz/Blues">
        <option value="Electronic">
        <option value="R&B and soul">
      </datalist>

      <datalist id="beverageOptions">
        <option value="Vodka">
        <option value="Wine">
        <option value="Beer">
        <option value="Whiskey">
        <option value="Other">
      </datalist>

      <datalist id="softDrinkOptions">
        <option value="Coca Cola/Pepsi">
        <option value="Fanta">
        <option value="7UP/Sprite">
        <option value="Other">
      </datalist>

      <button type="submit" class="btn btn-primary">Predict</button>
    </form>

    <p id="result"></p>

    <script type="module">
      import { DecisionTree } from "./libraries/decisiontree.js";

      let form = document.querySelector('form');
      let result = document.querySelector('#result');

      // Load the saved model from JSON file
      function loadSavedModel() {
        return fetch("./model.json")
          .then((response) => response.json())
          .then((model) => new DecisionTree(model));
      }

      // Make prediction when the form is submitted
      form.addEventListener('submit', (event) => {
        event.preventDefault();

        // Get user input
        let color = document.querySelector('#color').value;
        let musicGenre = document.querySelector('#musicGenre').value;
        let beverage = document.querySelector('#beverage').value;
        let softDrink = document.querySelector('#softDrink').value;

        // Load the saved model and make prediction
        loadSavedModel().then((decisionTree) => {
          let sample = { "Favorite Color": color, "Favorite Music Genre": musicGenre, "Favorite Beverage": beverage, "Favorite Soft Drink": softDrink };
          let prediction = decisionTree.predict(sample);
          result.textContent = `The predicted gender is ${prediction}.`;
        });
      });
    </script>
  </div>
</body>
</html>

